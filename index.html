<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Weather Radar with Warnings and Advisories</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <style>
        #map { height: 600px; }
        #controls { margin: 10px; }
        .label {
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px black;
        }
    </style>
</head>
<body>
    <h1>Global Weather Radar with Warnings and Advisories</h1>
    <div id="controls">
        <input type="text" id="start-location" placeholder="Enter Start Location" />
        <input type="text" id="end-location" placeholder="Enter End Location" />
        <button onclick="getDirections()">Get Directions</button>
        <br><br>
        <select id="weather-type">
            <optgroup label="Warnings">
                <option value="tornado-red">Tornado Warning (Red)</option>
                <option value="heavy-rain-red">Heavy Rain Warning (Dark Red)</option>
                <option value="flash-flood-blue">Flash Flood Warning (Blue)</option>
                <option value="coastal-flood-teal">Coastal Flood Warning (Teal)</option>
                <option value="freeze-light-blue">Freeze Warning (Light Blue)</option>
                <option value="heat-wave-dark-red">Heat Wave Warning (Dark Red)</option>
            </optgroup>
            <optgroup label="Advisories">
                <option value="wind-gray">Wind Advisory (Gray)</option>
                <option value="flood-light-blue">Flood Advisory (Light Blue)</option>
                <option value="thunderstorm-dark-yellow">Severe Thunderstorm Advisory (Dark Yellow)</option>
                <option value="extreme-heat-orange-red">Extreme Heat Advisory (Orange-Red)</option>
            </optgroup>
        </select>
        <button onclick="addWeatherPolygon()">Add Weather Alert</button>
    </div>
    <div id="map"></div>

    <script>
        var map = L.map('map').setView([20, 0], 2);  // Global view

        // Base Layer: OpenStreetMap
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Define colors for each alert
        var alertColors = {
            "tornado-red": "red",
            "heavy-rain-red": "darkred",
            "flash-flood-blue": "blue",
            "coastal-flood-teal": "teal",
            "freeze-light-blue": "lightblue",
            "heat-wave-dark-red": "darkred",
            "wind-gray": "gray",
            "flood-light-blue": "lightblue",
            "thunderstorm-dark-yellow": "darkyellow",
            "extreme-heat-orange-red": "orangered"
        };

        // Add user location marker
        navigator.geolocation.getCurrentPosition(function (position) {
            var userLat = position.coords.latitude;
            var userLng = position.coords.longitude;
            var userMarker = L.marker([userLat, userLng]).addTo(map);
            userMarker.bindPopup("You are here!").openPopup();
            map.setView([userLat, userLng], 8);  // Zoom in to user location
        });

        // Function to add weather polygons
        function addWeatherPolygon() {
            var weatherType = document.getElementById('weather-type').value;
            var color = alertColors[weatherType];
            var latlngs = [
                [40, -100], [45, -100], [45, -95], [40, -95]  // Example polygon coordinates
            ];
            var polygon = L.polygon(latlngs, { color: color }).addTo(map);
            var label = weatherType.replace(/-/g, ' ').replace(/\b\w/g, c => c.toUpperCase());
            polygon.bindTooltip(`<span class='label'>${label}</span>`, { permanent: true, direction: 'center' });
        }

        // Function to get directions
        function getDirections() {
            var startLocation = document.getElementById('start-location').value;
            var endLocation = document.getElementById('end-location').value;

            if (!startLocation || !endLocation) {
                alert("Please enter both start and end locations.");
                return;
            }

            L.Routing.control({
                waypoints: [
                    L.latLng(startLocation),
                    L.latLng(endLocation)
                ],
                routeWhileDragging: true
            }).addTo(map);
        }
    </script>
</body>
</html>


